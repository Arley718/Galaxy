<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Te amo</title>
<link rel="stylesheet" href="estilos.css">
</head>

<body>
<div id="viewport">
<div id="universe"></div>
</div>

<script>
const universe = document.getElementById("universe");

/* ===== ESTRELLAS ===== */
const isMobile = window.innerWidth < 768;
const STAR_COUNT = isMobile ? 150 : 400;

for (let i = 0; i < STAR_COUNT; i++) {
  let star = document.createElement("div");
  star.className = "star";

  let z = Math.random() * 3 + 1;
  star.dataset.z = z;

  star.style.top = Math.random() * 4000 + "px";
  star.style.left = Math.random() * 4000 + "px";

  let size = Math.random() * 2 + 1;
  star.style.width = size + "px";
  star.style.height = size + "px";

  universe.appendChild(star);
}

/* ===== SOL CENTRAL ===== */
let sun = document.createElement("div");
sun.className = "sun";
sun.style.top = "1900px";
sun.style.left = "1900px";
universe.appendChild(sun);

/* ===== PLANETAS CORAZON ===== */
const messages = [
"Eres mi universo ðŸ’–","Contigo todo brilla âœ¨","Mi estrella favorita ðŸŒŸ",
"Mi princesa ðŸ’•","Amor infinito â™¾ï¸","Mi lugar seguro ðŸ«¶",
"Eres magia ðŸª„","Mi paz ðŸŒ¸","Mi destino ðŸ’«",
"Mi alegrÃ­a ðŸ˜","Siempre juntos ðŸ¤","Mi galaxia ðŸŒŒ"
];

function randomColor() {
  const colors = [
    "linear-gradient(45deg,#ff4da6,#ff99cc)",
    "linear-gradient(45deg,#a64dff,#d9b3ff)",
    "linear-gradient(45deg,#4dd2ff,#b3ecff)",
    "linear-gradient(45deg,#ff944d,#ffd1b3)",
    "linear-gradient(45deg,#66ff99,#ccffe6)"
  ];
  return colors[Math.floor(Math.random()*colors.length)];
}

const centerX = 2000;
const centerY = 2000;
const heartSize = 90;

for (let i = 0; i < 12; i++) {
  let t = (i/12)*Math.PI*2;

  let x = 16*Math.pow(Math.sin(t),3);
  let y = 13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);

  x = centerX + x*heartSize;
  y = centerY - y*heartSize;

  let planet = document.createElement("div");
  planet.className = "planet";
  planet.style.top = y+"px";
  planet.style.left = x+"px";

  let circle = document.createElement("div");
  circle.className = "circle";
  circle.style.background = randomColor();

  let size = 35 + Math.random()*10;
  circle.style.width = size+"px";
  circle.style.height = size+"px";

  let text = document.createElement("span");
  text.innerText = messages[i];

  planet.appendChild(circle);
  planet.appendChild(text);
  universe.appendChild(planet);
}

/* ===== MOVIMIENTO ===== */
let posX=-1500;
let posY=-1500;
let startX,startY;
let dragging=false;
let scale=1;
let lastDistance=null;

function update(){
  universe.style.transform=`translate(${posX}px,${posY}px) scale(${scale})`;

  document.querySelectorAll(".star").forEach(star=>{
    let z=star.dataset.z;
    star.style.transform=`scale(${scale*z})`;
    star.style.opacity=Math.min(1,0.4+scale*0.3);
  });
}
update();

/* ===== MOUSE PC ===== */
window.addEventListener("mousedown",(e)=>{
  dragging=true;
  startX=e.clientX;
  startY=e.clientY;
});
window.addEventListener("mousemove",(e)=>{
  if(!dragging)return;
  posX+=e.clientX-startX;
  posY+=e.clientY-startY;
  startX=e.clientX;
  startY=e.clientY;
  update();
});
window.addEventListener("mouseup",()=>dragging=false);

/* ===== ZOOM MOUSE ===== */
window.addEventListener("wheel",(e)=>{
  e.preventDefault();
  scale+=e.deltaY<0?0.1:-0.1;
  scale=Math.min(Math.max(0.6,scale),1.8);
  update();
});

/* ===== DISTANCIA DEDOS ===== */
function getDistance(t){
  let dx=t[0].clientX-t[1].clientX;
  let dy=t[0].clientY-t[1].clientY;
  return Math.sqrt(dx*dx+dy*dy);
}

/* ===== TOUCH MOVIL ===== */
window.addEventListener("touchstart",(e)=>{
  if(e.touches.length===1){
    dragging=true;
    startX=e.touches[0].clientX;
    startY=e.touches[0].clientY;
  }
});

window.addEventListener("touchmove",(e)=>{
  e.preventDefault();

  if(e.touches.length===1 && dragging){
    let x=e.touches[0].clientX;
    let y=e.touches[0].clientY;
    posX+=x-startX;
    posY+=y-startY;
    startX=x;
    startY=y;
    update();
  }

  if(e.touches.length===2){
    let dist=getDistance(e.touches);
    if(lastDistance){
      scale+=(dist-lastDistance)*0.002;
      scale=Math.min(Math.max(0.6,scale),1.8);
      update();
    }
    lastDistance=dist;
  }

},{passive:false});

window.addEventListener("touchend",()=>{
  dragging=false;
  lastDistance=null;
});
</script>
</body>
</html>
